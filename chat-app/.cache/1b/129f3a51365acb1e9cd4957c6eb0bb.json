{"id":"node_modules/graphql-request/dist/createRequestBody.js","dependencies":[{"name":"/Users/Martin/Documents/GitHub/cloud-services-backend/chat-app/node_modules/graphql-request/dist/createRequestBody.js.map","includedInParent":true,"mtime":1682066050564},{"name":"/Users/Martin/Documents/GitHub/cloud-services-backend/chat-app/package.json","includedInParent":true,"mtime":1682065915991},{"name":"/Users/Martin/Documents/GitHub/cloud-services-backend/chat-app/node_modules/graphql-request/package.json","includedInParent":true,"mtime":1682066050110},{"name":"extract-files","loc":{"line":6,"column":30,"index":246},"parent":"/Users/Martin/Documents/GitHub/cloud-services-backend/chat-app/node_modules/graphql-request/dist/createRequestBody.js","resolved":"/Users/Martin/Documents/GitHub/cloud-services-backend/chat-app/node_modules/extract-files/public/index.js"},{"name":"form-data","loc":{"line":7,"column":42,"index":306},"parent":"/Users/Martin/Documents/GitHub/cloud-services-backend/chat-app/node_modules/graphql-request/dist/createRequestBody.js","resolved":"/Users/Martin/Documents/GitHub/cloud-services-backend/chat-app/node_modules/form-data/lib/browser.js"}],"generated":{"js":"\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar extract_files_1 = require(\"extract-files\");\nvar form_data_1 = __importDefault(require(\"form-data\"));\n/**\n * Duck type if NodeJS stream\n * https://github.com/sindresorhus/is-stream/blob/3750505b0727f6df54324784fe369365ef78841e/index.js#L3\n */\nvar isExtractableFileEnhanced = function (value) {\n    return extract_files_1.isExtractableFile(value) ||\n        (value !== null && typeof value === 'object' && typeof value.pipe === 'function');\n};\n/**\n * Returns Multipart Form if body contains files\n * (https://github.com/jaydenseric/graphql-multipart-request-spec)\n * Otherwise returns JSON\n */\nfunction createRequestBody(query, variables, operationName) {\n    var _a = extract_files_1.extractFiles({ query: query, variables: variables, operationName: operationName }, '', isExtractableFileEnhanced), clone = _a.clone, files = _a.files;\n    if (files.size === 0) {\n        if (!Array.isArray(query)) {\n            return JSON.stringify(clone);\n        }\n        if (typeof variables !== 'undefined' && !Array.isArray(variables)) {\n            throw new Error('Cannot create request body with given variable type, array expected');\n        }\n        // Batch support\n        var payload = query.reduce(function (accu, currentQuery, index) {\n            accu.push({ query: currentQuery, variables: variables ? variables[index] : undefined });\n            return accu;\n        }, []);\n        return JSON.stringify(payload);\n    }\n    var Form = typeof FormData === 'undefined' ? form_data_1.default : FormData;\n    var form = new Form();\n    form.append('operations', JSON.stringify(clone));\n    var map = {};\n    var i = 0;\n    files.forEach(function (paths) {\n        map[++i] = paths;\n    });\n    form.append('map', JSON.stringify(map));\n    i = 0;\n    files.forEach(function (paths, file) {\n        form.append(\"\" + ++i, file);\n    });\n    return form;\n}\nexports.default = createRequestBody;\n"},"sourceMaps":{"js":{"version":3,"file":"createRequestBody.js","sourceRoot":"","sources":["../src/createRequestBody.ts"],"names":[],"mappings":";;;;;AAAA,+CAAgF;AAChF,wDAAoC;AAIpC;;;GAGG;AACH,IAAM,yBAAyB,GAAG,UAAC,KAAU;IAC3C,OAAA,iCAAiB,CAAC,KAAK,CAAC;QACxB,CAAC,KAAK,KAAK,IAAI,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,OAAO,KAAK,CAAC,IAAI,KAAK,UAAU,CAAC;AADjF,CACiF,CAAA;AAEnF;;;;GAIG;AACH,SAAwB,iBAAiB,CACvC,KAAwB,EACxB,SAAmC,EACnC,aAAsB;IAEhB,IAAA,KAAmB,4BAAY,CAAC,EAAE,KAAK,OAAA,EAAE,SAAS,WAAA,EAAE,aAAa,eAAA,EAAE,EAAE,EAAE,EAAE,yBAAyB,CAAC,EAAjG,KAAK,WAAA,EAAE,KAAK,WAAqF,CAAA;IAEzG,IAAI,KAAK,CAAC,IAAI,KAAK,CAAC,EAAE;QACpB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;YACzB,OAAO,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAA;SAC7B;QAED,IAAI,OAAO,SAAS,KAAK,WAAW,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;YACjE,MAAM,IAAI,KAAK,CAAC,qEAAqE,CAAC,CAAA;SACvF;QAED,gBAAgB;QAChB,IAAM,OAAO,GAAG,KAAK,CAAC,MAAM,CAC1B,UAAC,IAAI,EAAE,YAAY,EAAE,KAAK;YACxB,IAAI,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,YAAY,EAAE,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAA;YACvF,OAAO,IAAI,CAAA;QACb,CAAC,EACD,EAAE,CACH,CAAA;QAED,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAA;KAC/B;IAED,IAAM,IAAI,GAAG,OAAO,QAAQ,KAAK,WAAW,CAAC,CAAC,CAAC,mBAAY,CAAC,CAAC,CAAC,QAAQ,CAAA;IAEtE,IAAM,IAAI,GAAG,IAAI,IAAI,EAAE,CAAA;IAEvB,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC,CAAA;IAEhD,IAAM,GAAG,GAAgC,EAAE,CAAA;IAC3C,IAAI,CAAC,GAAG,CAAC,CAAA;IACT,KAAK,CAAC,OAAO,CAAC,UAAC,KAAK;QAClB,GAAG,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAA;IAClB,CAAC,CAAC,CAAA;IACF,IAAI,CAAC,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,CAAA;IAEvC,CAAC,GAAG,CAAC,CAAA;IACL,KAAK,CAAC,OAAO,CAAC,UAAC,KAAK,EAAE,IAAI;QACxB,IAAI,CAAC,MAAM,CAAC,KAAG,EAAE,CAAG,EAAE,IAAW,CAAC,CAAA;IACpC,CAAC,CAAC,CAAA;IAEF,OAAO,IAAgB,CAAA;AACzB,CAAC;AA/CD,oCA+CC","sourcesContent":[null]}},"error":null,"hash":"fd2cf1686b40a644334e50777dc67170","cacheData":{"env":{}}}